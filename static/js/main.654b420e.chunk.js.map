{"version":3,"sources":["firebase.js","image/404error.png","pages/Error.jsx","pages/Login.jsx","image/add-user.png","pages/Register.jsx","context/AuthContext.js","image/harry_potter.webp","components/Navbar.jsx","components/Search.jsx","context/ChatContext.js","components/Chats.jsx","components/Sidebar.jsx","image/video-camera-svgrepo-com.svg","image/user-add-svgrepo-com.svg","image/more-svgrepo-com.svg","components/Message.jsx","components/Messages.jsx","image/attach-svgrepo-com.svg","image/image-add-fill-svgrepo-com.svg","components/Input.jsx","components/Chat.jsx","pages/Home.jsx","App.js","index.js"],"names":["auth","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getAuth","storage","getStorage","db","getFirestore","Error","className","src","errorImage","alt","to","Login","useState","err","setErr","navigate","useNavigate","handleSubmit","e","preventDefault","email","target","value","password","signInWithEmailAndPassword","onSubmit","type","placeholder","Register","displayName","file","files","createUserWithEmailAndPassword","res","storageRef","ref","uploadTask","uploadBytesResumable","on","error","getDownloadURL","snapshot","then","downloadURL","updateProfile","user","photoURL","setDoc","doc","uid","style","display","id","htmlFor","avatarImage","AuthContext","createContext","AuthContextProvider","children","currentUser","setCurrentUser","useEffect","unsub","onAuthStateChanged","Provider","Navbar","useContext","onClick","signOut","Search","username","setUsername","setUser","handleSearch","q","query","collection","where","getDocs","forEach","data","handleSelect","combinedId","getDoc","exists","messages","updateDoc","serverTimestamp","onKeyDown","code","onChange","ChatContext","ChatContextProvider","useReducer","state","action","payload","chatId","dispatch","Chats","chats","setChats","onSnapshot","getChats","Object","entries","sort","a","b","date","map","chat","u","userInfo","lastMessage","text","Sidebar","Message","useRef","current","scrollIntoView","behavior","senderId","img","Messages","setMessages","unSub","m","Input","setText","setImg","handleSend","uuid","arrayUnion","Timestamp","now","Attach","name","Img","Chat","Camera","User","More","Home","App","ProtectedRoute","path","index","element","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.654b420e.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getStorage } from 'firebase/storage';\nimport { getFirestore } from 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCNe2WEpXW3DujpQL_D_151eVBSsSov1D4',\n  authDomain: 'chat-75f20.firebaseapp.com',\n  projectId: 'chat-75f20',\n  storageBucket: 'chat-75f20.appspot.com',\n  messagingSenderId: '214814540477',\n  appId: '1:214814540477:web:3c65552d8fd4ad2b982dd4',\n};\n\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth();\nexport const storage = getStorage();\nexport const db = getFirestore();\n","export default __webpack_public_path__ + \"static/media/404error.2a9b2b2d.png\";","import React from 'react';\nimport {Link } from 'react-router-dom';\n\nimport errorImage from '../image/404error.png';\n\nconst Error = () => {\n  return (\n    <div className='errorContainer'>\n      <div className='errorContainer'>\n        <img src={errorImage} alt='error' />\n        <p>Something went wrong</p>\n        <button>\n          <Link to='/'>Go Back</Link>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Error;\n","import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebase';\nimport Error from './Error';\n\nconst Login = () => {\n  const [err, setErr] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const email = e.target[0].value;\n    const password = e.target[1].value;\n\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      navigate('/');\n    } catch (err) {\n      setErr(true);\n    }\n  };\n\n  return (\n    <>\n      {err ? (\n        <Error />\n      ) : (\n        <div className='formContainer'>\n          <div className='formWrapper'>\n            <span className='logo'>BuDu Chat</span>\n            <span className='title'>Login</span>\n            <form onSubmit={handleSubmit}>\n              <input type='email' placeholder='email' />\n              <input type='password' placeholder='password' />\n              <button>Sign In</button>\n              {err && <Error />}\n            </form>\n            <p>\n              Do you have an account? <Link to='/register'>Register</Link>\n            </p>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Login;\n","export default __webpack_public_path__ + \"static/media/add-user.0653f26b.png\";","import React, { useState } from 'react';\nimport { createUserWithEmailAndPassword, updateProfile } from 'firebase/auth';\nimport { auth, storage, db } from '../firebase';\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\nimport { doc, setDoc } from 'firebase/firestore';\nimport { useNavigate, Link } from 'react-router-dom';\nimport avatarImage from '../image/add-user.png';\nimport Error from './Error';\n\nconst Register = () => {\n  const [err, setErr] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const displayName = e.target[0].value;\n    const email = e.target[1].value;\n    const password = e.target[2].value;\n    const file = e.target[3].files[0];\n\n    try {\n      const res = await createUserWithEmailAndPassword(auth, email, password);\n\n      const storageRef = ref(storage, displayName);\n\n      const uploadTask = uploadBytesResumable(storageRef, file);\n\n      uploadTask.on(\n        error => {\n          setErr(true);\n        },\n        () => {\n          getDownloadURL(uploadTask.snapshot.ref).then(async downloadURL => {\n            await updateProfile(res.user, {\n              displayName,\n              photoURL: downloadURL,\n            });\n            await setDoc(doc(db, 'users', res.user.uid), {\n              uid: res.user.uid,\n              displayName,\n              email,\n              photoURL: downloadURL,\n            });\n            await setDoc(doc(db, 'userChats', res.user.uid), {});\n            navigate('/');\n          });\n        }\n      );\n    } catch (err) {\n      setErr(true);\n    }\n  };\n\n  return (\n    <>\n      {err ? (\n        <Error/>\n      ) : (\n        <div className='formContainer'>\n          <div className='formWrapper'>\n            <span className='logo'>BuDu Chat</span>\n            <span className='title'>Register</span>\n            <form onSubmit={handleSubmit}>\n              <input type='text' placeholder='display name' />\n              <input type='email' placeholder='email' />\n              <input type='password' placeholder='password' />\n              <input style={{ display: 'none' }} type='file' id='file' />\n              <label htmlFor='file'>\n                <img src={avatarImage} alt='avatarImage' />\n                <span>Add an avatar</span>\n              </label>\n              <button>Sign Up</button>\n            </form>\n            <p>\n              Do you have an account? <Link to='/login'>Login</Link>\n            </p>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Register;\n","import { createContext, useEffect, useState } from 'react';\nimport { auth } from '../firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\n\nexport const AuthContext = createContext();\n\nexport const AuthContextProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState({});\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, user => {\n      setCurrentUser(user);\n    });\n    return () => {\n      unsub();\n    };\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ currentUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/harry_potter.567b8f44.webp\";","import React, { useContext } from 'react';\nimport { signOut } from 'firebase/auth';\nimport { auth } from '../firebase';\n\nimport userPhoto from '../image/harry_potter.webp';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Navbar = () => {\n  const { currentUser } = useContext(AuthContext);\n  return (\n    <div className='navbar'>\n      <span className='logo'>Logo Chat</span>\n      <div className='user'>\n        <img src={currentUser.photoURL} alt='userPhoto' />\n        <span>{currentUser.displayName}</span>\n        <button onClick={() => signOut(auth)}>logout</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React, { useContext, useState } from 'react';\nimport {\n  collection,\n  query,\n  where,\n  getDoc,\n  getDocs,\n  serverTimestamp,\n  updateDoc,\n  doc,\n  setDoc,\n} from 'firebase/firestore';\nimport { db } from '../firebase';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Search = () => {\n  const [username, setUsername] = useState('');\n  const [user, setUser] = useState(null);\n  const [err, setErr] = useState(false);\n\n  const { currentUser } = useContext(AuthContext);\n\n  const handleSearch = async () => {\n    const q = query(\n      collection(db, 'users'),\n      where('displayName', '==', username)\n    );\n    try {\n      const querySnapshot = await getDocs(q);\n      querySnapshot.forEach(doc => {\n        setUser(doc.data());\n      });\n    } catch (err) {\n      setErr(true);\n    }\n  };\n\n  const handleKey = e => {\n    e.code === 'Enter' && handleSearch();\n  };\n\n  const handleSelect = async () => {\n    const combinedId =\n      currentUser.uid > user.uid\n        ? currentUser.uid + user.uid\n        : user.uid + currentUser.uid;\n\n    try {\n      const res = await getDoc(doc(db, 'chats', combinedId));\n      if (!res.exists()) {\n        await setDoc(doc(db, 'chats', combinedId), { messages: [] });\n\n        await updateDoc(doc(db, 'userChats', currentUser.uid), {\n          [combinedId + '.userInfo']: {\n            uid: user.uid,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n          },\n          [combinedId + '.date']: serverTimestamp(),\n        });\n\n        await updateDoc(doc(db, 'userChats', user.uid), {\n          [combinedId + '.userInfo']: {\n            uid: currentUser.uid,\n            displayName: currentUser.displayName,\n            photoURL: currentUser.photoURL,\n          },\n          [combinedId + '.date']: serverTimestamp(),\n        });\n      }\n    } catch (err) {}\n\n    setUser(null);\n    setUsername('');\n  };\n  return (\n    <div className='search'>\n      <div className='searchForm'>\n        <input\n          type='text'\n          placeholder='Find a user...'\n          onKeyDown={handleKey}\n          onChange={e => setUsername(e.target.value)}\n          value={username}\n        />\n      </div>\n      {err && <span>User Not Found</span>}\n      {user && (\n        <div className='userChat' onClick={handleSelect}>\n          <img src={user.photoURL} alt='userPhoto' />\n          <div className='userChatInfo'>\n            <span>{user.displayName}</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Search;\n","import { createContext, useContext, useEffect, useReducer, useState } from 'react';\nimport { auth } from '../firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { AuthContext } from './AuthContext';\n\nexport const ChatContext = createContext();\n\nexport const ChatContextProvider = ({ children }) => {\n  const { currentUser } = useContext(AuthContext);\n  const INTINAL_STATE = {\n    chatId: 'null',\n    user: {},\n  };\n\n  const chatReduser = (state, action) => {\n    switch (action.type) {\n      case 'CHANGE_USER':\n        return {\n          user: action.payload,\n          chatId:\n            currentUser.uid > action.payload.uid\n              ? currentUser.uid + action.payload.uid\n              : action.payload.uid + currentUser.uid,\n        };\n    }\n  };\n  const [state, dispatch] = useReducer(chatReduser, INTINAL_STATE) \n\n  return (\n    <ChatContext.Provider value={{ data:state, dispatch }}>\n      {children}\n    </ChatContext.Provider>\n  );\n};\n","import { doc, onSnapshot } from 'firebase/firestore';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { ChatContext } from '../context/ChatContext';\nimport { db } from '../firebase';\n\nconst Chats = () => {\n  const [chats, setChats] = useState([]);\n\n  const { currentUser } = useContext(AuthContext);\n  const { dispatch } = useContext(ChatContext);\n\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, 'userChats', currentUser.uid), doc => {\n        setChats(doc.data());\n      });\n      return () => {\n        unsub();\n      };\n    };\n\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n\n  const handleSelect = (u) => {\n    dispatch({type: 'CHANGE_USER', payload: u})\n  }\n\n  return (\n    <div className='chats'>\n      {Object.entries(chats)?.sort((a, b) => b[1].date - a[1].date).map(chat => (\n        <div className='userChat' key={chat[0]}  onClick={() => handleSelect(chat[1].userInfo)}>\n          <img src={chat[1].userInfo.photoURL} alt='userPhoto' />\n          <div className='userChatInfo'>\n            <span>{chat[1].userInfo.displayName}</span>\n            <p>{chat[1].lastMessage?.text}</p>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Chats;\n","import React from 'react';\n\nimport Navbar from './Navbar';\nimport Search from './Search';\nimport Chats from './Chats';\n\n\nconst Sidebar = () => {\n  return (\n    <div className='sidebar'>\n      <Navbar />\n      <Search />\n      <Chats />\n    </div>\n  );\n};\n\nexport default Sidebar;\n","export default __webpack_public_path__ + \"static/media/video-camera-svgrepo-com.e2b4f992.svg\";","export default __webpack_public_path__ + \"static/media/user-add-svgrepo-com.94fcd152.svg\";","export default __webpack_public_path__ + \"static/media/more-svgrepo-com.6600884b.svg\";","import React, { useContext, useEffect, useRef } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { ChatContext } from '../context/ChatContext';\n\nimport UserPhoto from '../image/harry_potter.webp';\n\nconst Message = ({ messages }) => {\n  const { currentUser } = useContext(AuthContext);\n  const { data } = useContext(ChatContext);\n\n  const ref = useRef();\n\n  useEffect(() => {\n    ref.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  return (\n    <div\n      className={`message $${messages.senderId === currentUser.uid && 'owner'}`}\n    >\n      <div className='messageInfo'>\n        <img\n          src={\n            messages.senderId === currentUser.uid\n              ? currentUser.photoURL\n              : data.user.photoURL\n          }\n          alt='UserPhoto'\n        />\n        <span>just now</span>\n      </div>\n      <div className='messageContent'>\n        <p>{messages.text}</p>\n        {messages.img && <img src={messages.img} alt='UserPhoto' />}\n      </div>\n    </div>\n  );\n};\n\nexport default Message;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { ChatContext } from '../context/ChatContext';\nimport { db } from '../firebase';\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport Message from './Message';\n\nconst Messages = () => {\n  const [messages, setMessages] = useState([]);\n  const { data } = useContext(ChatContext);\n\n  useEffect(() => {\n    const unSub = onSnapshot(doc(db, 'chats', data.chatId), doc => {\n      doc.exists() && setMessages(doc.data().messages);\n    });\n\n    return () => {\n      unSub();\n    };\n  }, [data.chatId]);\n  return (\n    <div className='messages'>\n      {messages.map(m => (\n        <Message messages={m} key={m.id} />\n      ))}\n    </div>\n  );\n};\n\nexport default Messages;\n","export default __webpack_public_path__ + \"static/media/attach-svgrepo-com.563a6fea.svg\";","export default __webpack_public_path__ + \"static/media/image-add-fill-svgrepo-com.e311e3a8.svg\";","import React, { useContext, useState } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { ChatContext } from '../context/ChatContext';\nimport {\n  arrayUnion,\n  doc,\n  updateDoc,\n  Timestamp,\n  serverTimestamp,\n} from 'firebase/firestore';\nimport { db, storage } from '../firebase';\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\n\nimport { v4 as uuid } from 'uuid';\n\nimport Attach from '../image/attach-svgrepo-com.svg';\nimport Img from '../image/image-add-fill-svgrepo-com.svg';\n\nconst Input = () => {\n  const [text, setText] = useState('');\n  const [img, setImg] = useState(null);\n\n  const { currentUser } = useContext(AuthContext);\n  const { data } = useContext(ChatContext);\n\n  const handleSend = async () => {\n    if (img) {\n      const storageRef = ref(storage, uuid());\n\n      const uploadTask = uploadBytesResumable(storageRef, img);\n\n      uploadTask.on(\n        error => {\n          //setErr(true);\n        },\n        () => {\n          getDownloadURL(uploadTask.snapshot.ref).then(async downloadURL => {\n            await updateDoc(doc(db, 'chats', data.chatId), {\n              messages: arrayUnion({\n                id: uuid(),\n                text,\n                senderId: currentUser.uid,\n                date: Timestamp.now(),\n                img: downloadURL,\n              }),\n            });\n          });\n        }\n      );\n    } else {\n      await updateDoc(doc(db, 'chats', data.chatId), {\n        messages: arrayUnion({\n          id: uuid(),\n          text,\n          senderId: currentUser.uid,\n          date: Timestamp.now(),\n        }),\n      });\n    }\n\n    await updateDoc(doc(db, 'userChats', currentUser.uid), {\n      [data.chatId + '.lastMessage']: {\n        text,\n      },\n      [data.chatId + '.date']: serverTimestamp(),\n    });\n\n    await updateDoc(doc(db, 'userChats', data.user.uid), {\n      [data.chatId + '.lastMessage']: {\n        text,\n      },\n      [data.chatId + '.date']: serverTimestamp(),\n    });\n\n    setText('');\n    setImg(null);\n  };\n  return (\n    <div className='input'>\n      <input\n        type='text'\n        placeholder='Type something...'\n        onChange={e => setText(e.target.value)}\n        value={text}\n      />\n      <div className='send'>\n        <img src={Attach} alt='attach' />\n        <input\n          type='file'\n          name='file'\n          id='file'\n          style={{ display: 'none' }}\n          onChange={e => setImg(e.target.files[0])}\n        />\n        <label htmlFor='file'>\n          <img src={Img} alt='images' />\n        </label>\n        <button onClick={handleSend}>Send</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Input;\n","import React, { useContext } from 'react';\nimport Camera from '../image/video-camera-svgrepo-com.svg';\nimport User from '../image/user-add-svgrepo-com.svg';\nimport More from '../image/more-svgrepo-com.svg';\n\nimport Messages from './Messages';\nimport Input from './Input';\nimport { ChatContext } from '../context/ChatContext';\n\nconst Chat = () => {\n  const { data } = useContext(ChatContext);\n  return (\n    <div className='chat'>\n      <div className='chatInfo'>\n        <span>{data.user?.displayName}</span>\n        <div className='chatIcons'>\n          <img src={Camera} alt='camera' />\n          <img src={User} alt='user' />\n          <img src={More} alt='more' />\n        </div>\n      </div>\n      <Messages />\n      <Input />\n    </div>\n  );\n};\n\nexport default Chat;\n","import React from 'react';\nimport Sidebar from '../components/Sidebar';\nimport Chat from '../components/Chat';\n\nconst Home = () => {\n  return (\n    <div className='home'>\n      <div className='container'>\n        <Sidebar />\n        <Chat />\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React, { useContext } from 'react';\n\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Home from './pages/Home';\nimport Error from './pages/Error';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport './style.scss';\nimport { AuthContext } from './context/AuthContext';\n\nfunction App() {\n  const { currentUser } = useContext(AuthContext);\n\n  const ProtectedRoute = ({ children }) => {\n    if (!currentUser) {\n      return <Navigate to='/login' />;\n    }\n    return children;\n  };\n\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path='/'>\n          <Route\n            index\n            element={\n              <ProtectedRoute>\n                <Home />\n              </ProtectedRoute>\n            }\n          />\n          <Route path='login' element={<Login />} />\n          <Route path='register' element={<Register />} />\n          <Route path='error' element={<Error />} />\n        </Route>\n      </Routes>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext';\nimport { ChatContextProvider } from './context/ChatContext';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <AuthContextProvider>\n    <ChatContextProvider>\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    </ChatContextProvider>\n  </AuthContextProvider>\n);\n"],"sourceRoot":""}